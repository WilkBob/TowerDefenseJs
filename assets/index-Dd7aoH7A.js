(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const r of h.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(n){if(n.ep)return;n.ep=!0;const h=s(n);fetch(n.href,h)}})();const x="/images/maps/level1.png",w="/images/maps/level1mask.png",v={level1:{name:"Level 1",reward:1e3,background:x,mask:w,path1:[{x:0,y:.4560546875},{x:.3330078125,y:.4541015625},{x:.3271484375,y:.1416015625},{x:.7080078125,y:.142578125},{x:.7119140625,y:.64453125},{x:1,y:.64453125}],path2:[{x:.767578125,y:.0048828125},{x:.7705078125,y:.1435546875},{x:.33203125,y:.14453125},{x:.3359375,y:.453125},{x:.2353515625,y:.455078125},{x:.234375,y:.830078125},{x:.70703125,y:.8251953125},{x:.703125,y:.64453125},{x:.998046875,y:.6435546875}],waves:[{path1:{enemies:["zombie","zombie","zombie"," zombie"," zombie"," zombie","zombie"],delay:1e3},path2:null},{path1:{enemies:["zombie","zombie","zombie"," zombie"," zombie"," zombie","zombie"],delay:1e3},path2:{enemies:["zombie","zombie","zombie"," zombie"," zombie"," zombie","zombie"],delay:1e3}}]}},u="/images/sprites/zombie.png",g="/images/sprites/zombieDeath.png",b="/images/sprites/roller.png",z="/images/sprites/rollerDeath.png",M={zombie:{name:"Zombie",key:"zombie",health:45,damage:10,speed:2,reward:40,size:128,spritesheet:{src:"/images/sprites/zombie.png",image:u,size:128,frames:24,fac:.8},animations:{death:{src:"/images/sprites/zombieDeath.png",image:g,size:128,frames:24,fac:.8}},messages:{death:["braaii-aaagghh","ergghh","bleeeegh","(Moans) Sarah... where...?","(Whines)* Light... makes head hurt...","The hunger... fades...","The light... it burns...","I hate you... I hate you... I hate you"],hit:["argh","ouch","oww"],spawn:["braiinss","braaaiiinnnsss","Fresh meat... everywhere...","huuuungryyy"],confusion:[],taunt:["You next... yummy brains...","Die living ones...",'(Reaching out)* "Come closer..."'],hitTower:["GRAHAHAHA","Must break tower! Brains behind!","Brains... so close..."]}},bigZombie:{name:"Big Zombie",key:"bigZombie",health:200,damage:20,speed:1.5,reward:100,size:128,spritesheet:{src:"/images/sprites/zombie.png",image:u,size:256,frames:24,fac:1.2},animations:{death:{src:"/images/sprites/zombieDeath.png",image:g,size:128,frames:24,fac:1.2}},messages:{death:["thud...","ugh... *BOOM*"],hit:["argh","ouch","oww"],spawn:["braiinss","braaaiiinnnsss","Fresh meat... everywhere...","huuuungryyy"],confusion:[],taunt:["You next... yummy brains...","Die living ones...",'(Reaching out)* "Come closer..."'],hitTower:["CRUSH","OBLITERATE","DESTROY"]}},roller:{name:"Roller",key:"roller",health:100,damage:50,speed:3,reward:150,size:128,spritesheet:{src:"/images/sprites/roller.png",image:b,size:128,frames:24,fac:.6},animations:{death:{src:"/images/sprites/rollerDeath.png",image:z,size:128,frames:24,fac:.6}},messages:{death:["thud...","ugh... *BOOM*"],hit:["clink","clang","crash"],spawn:["*rolling noises*","Rolling in...","*ominous rolling*"],hitTower:["*BOOM*","*CRASH*","*CRUNCH*"]}}},S="/images/sprites/tower.png",k="/images/sprites/tower_icon.png",I="/images/sprites/tower2.png",E="/images/sprites/tower2_icon.png",f={shooter:{name:"Shooter",key:"shooter",cost:350,damage:30,fireRate:1e3,range:.24,size:128,spritesheet:{src:"/images/sprites/tower.png",image:S,size:128,frames:24,fac:1.8},icon:k},sprayer:{name:"Sprayer",key:"sprayer",cost:600,damage:2,fireRate:125,range:.3,size:128,spritesheet:{src:"/images/sprites/tower2.png",image:I,size:128,frames:24,fac:1.8},icon:E}},R={name:"Player",health:100,money:600,score:0,progress:{wave:1,level:1,highscore:0}},d={text:"#fff",textDark:"#000",primary:"#00ff7b",secondary:"#6c757d",background:"#f0f0f042"};function B(a,t,s,i,n,h=!1){const r=h?10*e.fac:5*e.fac;e.ctx.beginPath(),e.ctx.fillStyle=`rgba(255, 255, 255, ${n*.5})`,e.ctx.lineWidth=2,e.ctx.moveTo(a+r,t),e.ctx.lineTo(a+s-r,t),e.ctx.quadraticCurveTo(a+s,t,a+s,t+r),e.ctx.lineTo(a+s,t+i-r),e.ctx.quadraticCurveTo(a+s,t+i,a+s-r,t+i),e.ctx.lineTo(a+r,t+i),e.ctx.quadraticCurveTo(a,t+i,a,t+i-r),e.ctx.lineTo(a,t+r),e.ctx.quadraticCurveTo(a,t,a+r,t),e.ctx.fill()}class P{constructor(t){this.messages=t}update(){this.messages.length>5&&this.messages.shift()}draw(){e.ctx.fillStyle=d.background,e.ctx.font=`${20*e.fac}px system-ui, -apple-system, Roboto, sans-serif`,this.messages.forEach((t,s)=>{const i=10*e.fac,n=e.canvas.height-(this.messages.length-s)*32*e.fac-10*e.fac,h=t.length*11*e.fac,r=30*e.fac,c=.2+.6*s/(this.messages.length-1);B(i,n,h,r,c),e.ctx.fillStyle=`rgba(255, 255, 255, ${c})`,e.ctx.fillText(t,i+10*e.fac,n+20*e.fac)})}}const C=function(){const a=document.createElement("div"),t=j();return a.appendChild(t),a.id="startMenu",a},T=function(){const a=document.createElement("button");return a.id="startButton",a.textContent="Start Game",a},j=function(){const a=document.createElement("h1");return a.id="title",a.textContent="Towers.js",a},O=function(){const a=document.createElement("button");return a.id="pauseButton",a.textContent="Pause Game",a},D=function(){const a=document.createElement("div");return a.id="towerSelector",Object.values(f).forEach(t=>{const s=document.createElement("div");s.classList.add("towerCard");const i=document.createElement("img");i.src=t.icon,i.classList.add("towerIcon"),s.appendChild(i);const n=document.createElement("p");n.textContent=t.name,s.appendChild(n);const h=document.createElement("p");h.textContent=`$${t.cost}`,s.appendChild(h),s.id=t.name,s.addEventListener("click",()=>{e.game.selectedTower=t.key,document.querySelectorAll(".towerCard").forEach(r=>r.classList.remove("active")),s.classList.add("active")}),a.appendChild(s)}),a};class H{constructor(){this.StartMenu=C(),this.StartButton=T(),this.StartMenu.appendChild(this.StartButton),this.StartButton.addEventListener("click",()=>{this.StartMenu.style.display="none",e.game.start()}),document.body.appendChild(this.StartMenu)}}class L{constructor(t,s,i,n,h){this.ctx=e.ctx,this.x=t,this.y=s,this.width=i,this.height=n,this.maxHealth=h}draw(t){const s=this.x*e.fac,i=this.y*e.fac,n=this.width*e.fac,h=this.height*e.fac;this.ctx.fillStyle="red",this.ctx.fillRect(s,i,n,h),this.ctx.fillStyle="green",this.ctx.fillRect(s,i,n*(t/this.maxHealth),h),this.ctx.strokeStyle="black",this.ctx.lineWidth=1*e.fac,this.ctx.strokeRect(s,i,n,h)}}class ${constructor(){this.state={health:0,money:200,messages:[]},this.view={hud:!1,messages:!0},this.startMenu=new H,this.pauseButton=O(),this.pauseButton.style.display="none",document.body.appendChild(this.pauseButton),this.pauseButton.addEventListener("click",()=>{e.game.pause()}),this.towerSelector=D(),document.body.appendChild(this.towerSelector),this.healthBar=new L(10,10,200,20,e.playerDefinition.health),this.messages=new P(this.state.messages)}start(){this.view.hud=!0,this.view.messages=!0,this.state.health=0,this.pauseButton.style.display="block",this.towerSelector.style.display="block"}pause(){this.view.hud=!1,this.view.messages=!1,this.pauseButton.style.display="none",this.startMenu.StartMenu.style.display="flex",this.towerSelector.style.display="none"}unpause(){this.view.hud=!0,this.view.messages=!0,this.pauseButton.style.display="block",this.startMenu.StartMenu.style.display="none",this.towerSelector.style.display="block"}gameOver(){this.view.hud=!1,this.view.messages=!0,this.pauseButton.style.display="none",this.startMenu.StartMenu.style.display="flex",this.towerSelector.style.display="none"}update(){this.state.health<e.game.player.health&&this.state.health++,this.state.health>e.game.player.health&&this.state.health--;let t=e.game.player.money-this.state.money;if(t!==0){let s=Math.ceil(Math.max(1,Math.abs(t)/10));this.state.money+=Math.sign(t)*Math.min(Math.abs(t),s)}this.view.messages&&this.messages.update()}drawMouse(){if(e.game.paused)e.mouse.canPlace=!1,e.ctx.fillStyle="rgba(255,255,255,0.5)";else{e.mouse.canPlace=e.game.clickmask.check(e.mouse.x,e.mouse.y);const t=e.game.objects.towers.find(s=>s.isMouseOver);t?(e.mouse.canPlace=!1,e.mouse.radius=t.range*e.size,console.log(t.range)):e.mouse.radius=10*e.fac,e.ctx.fillStyle=e.mouse.canPlace?"rgba(255,255,255,0.5)":"rgba(255,0,0,0.5)"}e.ctx.beginPath(),e.ctx.arc(e.mouse.x*e.size,e.mouse.y*e.size,e.mouse.radius*e.fac,0,Math.PI*2),e.ctx.fill(),e.ctx.closePath()}drawFps(){e.ctx.fillStyle=d.text;const t=e.size-100*e.fac,s=e.size-10*e.fac;e.ctx.fillText(`FPS: ${e.fps.fps}`,t,s)}draw(){e.ctx.fillStyle=d.text,e.ctx.font=`${20*e.fac}px system-ui, -apple-system, Roboto, sans-serif`,this.drawFps(),this.view.hud&&(e.ctx.fillText(`Money: ${this.state.money}`,10*e.fac,60*e.fac),this.healthBar.draw(this.state.health)),this.view.messages&&this.messages.draw()}}class q{constructor(t){console.log(t),this.image=new Image,this.image.src=t,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.canvas.width=e.size,this.canvas.height=e.size,this.image.onload=()=>{this.ctx.drawImage(this.image,0,0,this.canvas.width,this.canvas.height),this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}}check(t,s){t=Math.floor(t*e.size),s=Math.floor(s*e.size);const i=this.ctx.getImageData(t,s,1,1).data;return!(i[0]===0&&i[1]===0&&i[2]===0)}resize(){this.canvas.width=e.size,this.canvas.height=e.size,this.ctx.drawImage(this.image,0,0,this.canvas.width,this.canvas.height),this.imageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}}class A{constructor(t,s,i,n,h){this.x=n.x,this.y=n.y,this.rotation=n.rotation,this.fac=h,this.image=new Image,this.image.src=t,this.size=s,this.frames=i,this.frame=0,this.loaded=!1,this.image.onload=()=>{this.loaded=!0},setInterval(()=>{this.frame=this.frame+1},1e3/this.frames)}draw(){if(!this.loaded)return;const t=12,s=128,i=128,n=Math.floor(this.frame/t),r=this.frame%t*s,c=n*i;e.ctx.save(),e.ctx.translate(this.x*e.canvas.height,this.y*e.canvas.height),e.ctx.rotate(this.rotation);const o=this.size*e.fac*this.fac;e.ctx.drawImage(this.image,r,c,s,i,-o/2,-o/2,o,o),e.ctx.restore()}}class G{constructor(t,s){this.path=t,this.pathIndex=0,this.definition=s,this.ctx=e.ctx,this.x=t[0].x,this.y=t[0].y,this.rotation=0,this.dead=!1,this.size=this.definition.size,this.speed=this.definition.speed,this.health=this.definition.health,this.reward=this.definition.reward,this.damage=this.definition.damage,this.frame=0,this.dead=!1,this.animation=this.definition.spritesheet,this.deathAnimation=this.definition.animations.death,this.messages=this.definition.messages,this.currentMessage=this.messages.spawn[Math.floor(Math.random()*this.messages.spawn.length)],this.image=new Image,this.image.src=this.animation.src,this.player=e.game.player,this.loaded=!1,this.paused=!1,this.animInterval=setInterval(()=>{this.frame=this.frame+1,this.frame>=this.animation.frames&&(this.frame=0)},1e3/this.animation.frames),this.image.onload=()=>{this.loaded=!0},e.game.addMessage(this.currentMessage,this.definition.name)}drawHealthBar(){const t=this.size*e.fac*.8,s=10,i=this.x*e.size-t/2,n=this.y*e.size-this.size*e.fac/2-10;this.ctx.fillStyle="red",this.ctx.fillRect(i,n,t,s),this.ctx.fillStyle="green",this.ctx.fillRect(i,n,t*(this.health/this.definition.health),s)}draw(){if(!this.loaded)return;this.drawHealthBar();const t=12,s=128,i=128,n=Math.floor(this.frame/t),r=this.frame%t*s,c=n*i;this.ctx.save(),this.ctx.translate(this.x*e.size,this.y*e.size),this.ctx.rotate(this.rotation);const o=this.size*e.fac*this.animation.fac;this.ctx.drawImage(this.image,r,c,s,i,-o/2,-o/2,o,o),this.ctx.restore()}update(){if(this.dead||this.health<=0){console.log(this.player.money,this.reward),this.player.money+=this.reward,this.clearIntervals(),e.game.objects.enemies=e.game.objects.enemies.filter(r=>r!==this),e.game.objects.spritesheets.push(new A(this.deathAnimation.src,this.deathAnimation.size,this.deathAnimation.frames,{x:this.x,y:this.y,rotation:this.rotation},this.deathAnimation.fac));return}const t=this.path[this.pathIndex],s=t.x-this.x,i=t.y-this.y,n=Math.sqrt(s*s+i*i),h=this.speed*e.fac;if(n<h/e.size){if(this.x=t.x,this.y=t.y,this.pathIndex++,this.pathIndex>=this.path.length){if(this.currentMessage=this.messages.hitTower[Math.floor(Math.random()*this.messages.hitTower.length)],this.player.health-=this.definition.damage,e.game.addMessage(this.currentMessage,this.definition.name),this.dead=!0,this.player.health<=0){e.game.addMessage("Player dead","game"),e.game.gameOver();return}e.game.objects.enemies=e.game.objects.enemies.filter(r=>r!==this);return}}else this.x+=s/n*h/e.size,this.y+=i/n*h/e.size,this.rotation=Math.atan2(i,s)}clearIntervals(){clearInterval(this.animInterval)}}class F{constructor(t){this.name=t.name,this.maxHealth=t.health,this.health=t.health,this.money=t.money,this.startingMoney=t.money,this.score=t.score,this.progress=t.progress}save(){const t={name:this.name,health:this.maxHealth,progress:this.progress};window.localStorage.setItem("player",JSON.stringify(t))}load(){const t=JSON.parse(window.localStorage.getItem("player"));t&&(this.name=t.name,(this.name==="Player"||this.name==="player")&&(this.name=prompt("Enter your name"),this.name||(this.name="Player"),this.save()),this.score=t.score,this.progress=t.progress)}takeDamage(t){this.health-=t,this.health<=0&&(this.health=0)}heal(t){!this.health>=this.maxHealth&&(this.health+=t)}addMoney(t){this.money+=t}removeMoney(t){this.money-=t}addScore(t){this.score+=t}setProgress(t,s,i){this.progress.wave=t,this.progress.level=s,this.progress.highscore=i}}class W{constructor(t,s,i){this.ctx=t,this.angle=Math.atan2(i.y-s.y,i.x-s.x),this.x=s.x,this.y=s.y,this.target=i,this.speed=.05*e.fac,this.damage=s.damage,this.sizeFactor=10*e.fac,this.toRemove=!1}update(){if(!this.target||this.target.dead||this.target.health<=0){this.toRemove=!0,this.target=null;return}if(this.toRemove)return;const t=this.target.x-this.x,s=this.target.y-this.y,i=Math.sqrt(t*t+s*s);i<this.speed?(e.game.addMessage(this.target.definition.messages.hit[Math.floor(Math.random()*this.target.definition.messages.hit.length)],this.target.definition.name),this.target.health-=this.damage,this.toRemove=!0):(this.x+=t/i*this.speed,this.y+=s/i*this.speed)}draw(){this.toRemove||(this.ctx.fillStyle="red",this.ctx.beginPath(),this.ctx.arc(this.x*e.size,this.y*e.size,this.sizeFactor,0,Math.PI*2),this.ctx.fill(),this.ctx.closePath())}}class N{constructor(t,s,i){this.main=i,this.x=t.x,this.y=t.y,this.definition=s,this.ctx=e.ctx,this.size=50,this.range=this.definition.range,this.damage=this.definition.damage,this.fireRate=this.definition.fireRate,this.rotation=0,this.target=null,this.frame=1,this.image=new Image,this.image.src=this.definition.spritesheet.src,this.loaded=!1,this.image.onload=()=>{this.loaded=!0},this.isMouseOver=!1,this.frameInterval=setInterval(()=>{this.frame=this.frame+1,this.frame>=this.definition.spritesheet.frames&&(this.frame=1)},1e3/this.definition.spritesheet.frames),this.shootInterval=setInterval(()=>{this.target&&e.game.loaded&&!e.game.paused&&this.shoot()},this.fireRate),this.shoot()}shoot(){this.target&&(this.main.objects.bullets.push(new W(this.ctx,this,this.target)),console.log(this.main.objects.bullets))}draw(){if(!this.loaded)return;const t=12,s=128,i=128,n=Math.floor(this.frame/t),r=this.frame%t*s,c=n*i;this.ctx.save(),this.ctx.translate(this.x*e.size,this.y*e.size),this.ctx.rotate(this.rotation);const o=this.size*e.fac*this.definition.spritesheet.fac;this.ctx.drawImage(this.image,r,c,s,i,-o/2,-o/2,o,o),this.ctx.restore()}checkMouseOver(){const t=e.mouse.x*e.size,s=e.mouse.y*e.size,i=t-this.x*e.size,n=s-this.y*e.size,h=Math.sqrt(i*i+n*n);this.isMouseOver=h<this.size*e.fac}findFirstEnemyWithinRange(t,s){return s.find(i=>{const n=i.x-t.x,h=i.y-t.y;return Math.sqrt(n*n+h*h)<t.range})}findClosestEnemyWithinRange(t,s){let i=null,n=1/0;return s.forEach(h=>{const r=h.x-t.x,c=h.y-t.y,o=Math.sqrt(r*r+c*c);o<t.range&&o<n&&(i=h,n=o)}),i}update(){if(this.checkMouseOver(),this.target){const t=this.target.x-this.x,s=this.target.y-this.y,i=Math.sqrt(t*t+s*s);this.rotation=Math.atan2(s,t)-Math.PI/2,(i>this.range*e.fac||this.target.dead||this.target.health<=0)&&(this.target=null)}else{if(this.main.objects.enemies.length===0)return;this.target=this.findFirstEnemyWithinRange(this,this.main.objects.enemies)}}clearIntervals(){clearInterval(this.frameInterval),clearInterval(this.shootInterval)}}class Y{constructor(){this.objects={towers:[],bullets:[],enemies:[],spritesheets:[]},this.paused=!0,this.loaded=!1,this.player=new F(e.playerDefinition),this.player.load(),this.level=e.levelDefinitions.level1,this.background=new Image,this.background.src="/images/splash.png",this.background.onload=()=>{this.loaded=!0,this.addMessage("Level loaded","Game")},this.clickmask=new q(this.level.mask),this.ui=new $,this.selectedTower=null}update(){this.loaded&&(this.ui.update(),this.ui.draw(),!this.paused&&(this.objects.towers.forEach(t=>{t.update(),t.draw()}),this.objects.enemies.forEach(t=>{t.update(),t.draw()}),this.objects.bullets.forEach(t=>{t.update(),t.draw(),t.toRemove&&this.objects.bullets.splice(this.objects.bullets.indexOf(t),1)})))}draw(){this.loaded&&(e.ctx.drawImage(this.background,0,0,e.canvas.width,e.canvas.height),this.objects.spritesheets.forEach(t=>{t.draw(),t.frame===t.frames&&this.objects.spritesheets.splice(this.objects.spritesheets.indexOf(t),1)}))}loadBackground(t){this.loaded=!1,this.background.src=t,this.background.onload=()=>{this.loaded=!0}}addTower(t,s,i){if(this.player.money<i.cost){this.addMessage("Not enough money","Player");return}const n=new N({x:t,y:s},i,this);this.objects.towers.push(n),this.player.removeMoney(i.cost),this.addMessage(`Placed ${i.name}`,`${this.player.name}`)}addEnemy(t,s){const i=new G(t,e.enemyDefinitions[s],this);this.objects.enemies.push(i)}addMessage(t,s){const i=new Date;this.ui.state.messages.push(`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}:${i.getSeconds().toString().padStart(2,"0")} - ${s}: ${t}`)}click(){if(console.log("click"),!this.paused){if(!this.selectedTower){this.addMessage("No tower selected","Game");return}e.mouse.canPlace&&this.loaded?this.addTower(e.mouse.x,e.mouse.y,e.towerDefinitions[this.selectedTower]):this.addMessage("Cannot place tower here","Game")}}start(){this.loadBackground(this.level.background),this.ui.start(),this.paused=!1,this.addMessage("Game started","Game")}pause(){this.paused=!0,this.ui.pause()}unpause(){this.paused=!1,this.ui.unpause()}gameOver(){this.paused=!0,this.loaded=!1,this.ui.gameOver(),this.objects.towers.forEach(t=>{clearInterval(t.frameInterval),clearInterval(t.shootInterval)}),this.objects={towers:[],bullets:[],enemies:[],spritesheets:[]},this.player.save(),this.player.health=this.player.maxHealth,this.player.money=this.player.startingMoney,this.loadBackground("/images/splash.png"),this.addMessage("Game over","Game")}}const m=document.createElement("canvas");document.body.appendChild(m);const Z=m.getContext("2d"),e={canvas:m,ctx:Z,size:null,baseSize:1024,fac:null,fps:{frames:0,fps:null},mouse:{x:null,y:null,radius:10,color:"rgba(255,255,255,0.5)",down:!1,canPlace:!1},levelDefinitions:v,enemyDefinitions:M,towerDefinitions:f,playerDefinition:R,messageHistory:[],game:null};e.canvas.addEventListener("mousemove",a=>{const t=e.canvas.getBoundingClientRect();e.mouse.x=(a.clientX-t.left)/e.size,e.mouse.y=(a.clientY-t.top)/e.size});e.canvas.addEventListener("mousedown",a=>{e.mouse.down=!0});e.canvas.addEventListener("mouseup",a=>{e.mouse.down=!1});e.canvas.addEventListener("click",a=>{e.game.click(e.mouse.x,e.mouse.y)});window.addEventListener("resize",p);function p(){const a=Math.min(window.innerWidth,window.innerHeight);e.canvas.width=a,e.canvas.height=a,e.size=a,e.fac=a/e.baseSize,document.documentElement.style.setProperty("--canvas-fac",e.fac),document.documentElement.style.setProperty("--canvas-size",e.size+"px"),e.game&&e.game.clickmask.resize()}let l=1;window.addEventListener("keydown",a=>{a.key==="1"&&(l=1,e.game.addMessage(`Path ${l}`,"Game")),a.key==="2"&&(l=2,e.game.addMessage(`Path ${l}`,"Game")),a.key==="m"&&e.game.player.addMoney(100),a.key==="l"&&e.game.addEnemy(e.levelDefinitions.level1[`path${l}`],"zombie"),a.key==="k"&&e.game.addEnemy(e.levelDefinitions.level1[`path${l}`],"bigZombie"),a.key==="j"&&e.game.addEnemy(e.levelDefinitions.level1[`path${l}`],"roller")});setInterval(()=>{e.fps.fps=e.fps.frames,e.fps.frames=0},1e3);function U(){p(),e.game=new Y,e.loop=y()}function y(){return e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.game.draw(),e.game.update(),e.game.ui.drawMouse(),e.fps.frames++,requestAnimationFrame(y)}U();
